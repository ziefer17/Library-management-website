@model Library_Mangement_Website.Models.SachChiTietViewModel

@{
    ViewBag.Title = "Chi tiết sách";
    var sach = Model.Sach;
    var sachcopy = Model.Sach_Copy;
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
<style>
    .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 40px 20px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* Tiêu đề sách */
    h2 {
        font-size: 28px;
        color: #007BFF;
        margin-bottom: 10px;
    }

    .book-meta {
        font-size: 16px;
        color: #555;
        margin-bottom: 10px;
    }

    .btn {
        padding: 10px 20px;
        border-radius: 6px;
        margin-right: 10px;
        text-decoration: none;
        font-weight: 600;
    }

    .btn-primary {
        background-color: #007BFF;
        color: #fff;
        border: none;
    }

    .list ui li .action a {
        color: white;
    }

    .btn-success {
        background-color: #28a745;
        color: #fff;
        border: none;
    }

    .btn:hover {
        opacity: 0.9;
    }

    .recommend-title {
        margin-top: 40px;
        font-size: 22px;
        border-bottom: 2px solid #eee;
        padding-bottom: 8px;
        margin-bottom: 20px;
    }

    .card {
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        transition: box-shadow 0.3s ease;
        background-color: #fff;
    }

        .card:hover {
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

    .card-img-top {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .card-body {
        padding: 15px;
    }

    .card-title {
        font-size: 16px;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
    }

    .row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }

    .col-md-3 {
        flex: 1 1 calc(25% - 20px);
        min-width: 230px;
    }

    .recommend-scroll {
        display: flex;
        overflow-x: auto;
        gap: 20px;
        padding: 10px 0;
        scroll-behavior: smooth;
    }

    .suggest-card {
        min-width: 200px;
        flex: 0 0 auto;
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        background-color: #fff;
        transition: box-shadow 0.3s ease;
    }

        .suggest-card:hover {
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

    .card-img-top {
        width: 100%;
        height: 180px;
        object-fit: cover;
    }
</style>


<h2>@Model.Sach.TenSach</h2>
<p>
    <img src="@Model.image" style="width: 180px; height: 280px; vertical-align: middle;" />
</p>
<p><span style="font-weight:bold">Tác giả</span>: @string.Join(", ", Model.Sach?.TacGias.Select(t => t.Ten))</p>
<p><span style="font-weight:bold">Thể loại</span>: @Model.Sach.TheLoai.Ten</p>
<p><span style="font-weight:bold">Thông tin</span>: @Model.Sach.ThongTin</p>


<div class="row">
    <div class="list">
        <h3>Danh sách bản sao</h3>
        <ul>
            @if (!Model.SachCopies.Any())
            {
                <li><p>Không có bản sao nào.</p></li>
            }
            else
            {
                foreach (var item in Model.SachCopies)
                {
                    <li>
                        <div class="description">
                            Nhà xuất bản: @Html.DisplayFor(modelItem => item.NhaXuatBan.Ten)<br />
                            Năm xuất bản: @Html.DisplayFor(modelItem => item.NamXuatBan)
                        </div>
                        <div class="actions">
                            @Html.Partial("PdfReader", item)
                        </div>
                    </li>
                }
            }
        </ul>
    </div>
</div>

<h3>Đề xuất sách khác</h3>
<div class="recommend-scroll">
    @foreach (var item in Model.DeXuatSachs)
    {
        <div class="card suggest-card">
            <img src="@item.image" class="card-img-top" alt="Bìa sách">
            <div class="card-body">
                <h5 class="card-title">@item.Sach.TenSach</h5>
                <a class="btn btn-outline-primary btn-sm" href="@Url.Action("ChiTiet", "Home", new { id = item.copy_id })">Xem chi tiết</a>
            </div>
        </div>
    }
</div>